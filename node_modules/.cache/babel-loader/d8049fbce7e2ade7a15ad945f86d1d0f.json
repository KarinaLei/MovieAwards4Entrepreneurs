{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _classCallCheck from\"/Users/karina/Desktop/Shopify-FrontEnd-Challenge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/karina/Desktop/Shopify-FrontEnd-Challenge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/karina/Desktop/Shopify-FrontEnd-Challenge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/karina/Desktop/Shopify-FrontEnd-Challenge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import'./Search.css';import axios from'axios';import NominateBut from'./NominateBut';import RemoveBut from'./RemoveBut';import Banner from'react-js-banner';var Search=/*#__PURE__*/function(_React$Component){_inherits(Search,_React$Component);var _super=_createSuper(Search);function Search(props){var _this;_classCallCheck(this,Search);_this=_super.call(this,props);_this.renderBanner=function(){var nominees=_this.state.nominees;if(nominees.size>=5){return/*#__PURE__*/_jsx(Banner,{title:\"Congratulations! You've selected your top 5 movies! \\uD83C\\uDFA5\",css:_this.bannerCss,visibleTime:3000});}};_this.renderNominees=function(){var nominees=_this.state.nominees;var keys=Array.from(nominees.keys());var values=Array.from(nominees.values());if(nominees.size){return/*#__PURE__*/_jsxs(\"div\",{className:\"nominee-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header-container nominee-header\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Nominees\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"result-header left\",children:\"Title\"}),/*#__PURE__*/_jsx(\"span\",{className:\"result-header middleRight\",children:\"Year of Released\"}),/*#__PURE__*/_jsx(\"span\",{className:\"result-header right\",children:\"Action\"})]},\"row-header\"),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"nominee\",children:(keys,values).map(function(key,value){return/*#__PURE__*/_jsxs(\"div\",{className:\"result-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"result-title left\",children:key.title}),/*#__PURE__*/_jsx(\"span\",{className:\"result-year middle\",children:key.yor}),/*#__PURE__*/_jsx(RemoveBut,{action:_this.remove,imdbID:keys[value],title:key.title,yor:key.yor})]},keys[value]);})})]});}else{return/*#__PURE__*/_jsxs(\"div\",{className:\"nominee-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header-container nominee-header\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Nominees\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"result-header left\",children:\"Title\"}),/*#__PURE__*/_jsx(\"span\",{className:\"result-header middleRight\",children:\"Year of Released\"}),/*#__PURE__*/_jsx(\"span\",{className:\"result-header right\",children:\"Action\"})]},\"row-header\"),/*#__PURE__*/_jsx(\"div\",{className:\"nominee\"})]});}};_this.renderSearchResults=function(){var results=_this.state.results;var lastQuery=_this.state.lastQuery;if(!_this.state.message.length&&Object.keys(results)&&results.length){return/*#__PURE__*/_jsxs(\"div\",{className:\"result-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header-container result-header\",children:/*#__PURE__*/_jsxs(\"h1\",{className:\"msg\",children:[results.length,\" results for \\\"\",lastQuery,\"\\\"\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"result\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"result-header left\",children:\"Title\"}),/*#__PURE__*/_jsx(\"span\",{className:\"result-header middle\",children:\"Year of Released\"}),/*#__PURE__*/_jsx(\"span\",{className:\"result-header right\",children:\"Action\"})]},\"row-header\"),/*#__PURE__*/_jsx(\"hr\",{}),results.map(function(result){return/*#__PURE__*/_jsxs(\"div\",{className:\"result-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"result-title left\",children:result.Title}),/*#__PURE__*/_jsx(\"span\",{className:\"result-year middle\",children:result.Year}),/*#__PURE__*/_jsx(NominateBut,{action:_this.toggleSearch,nominees:_this.state.nominees,imdbID:result.imdbID,title:result.Title,yor:result.Year,active:_this.state.nominees.has(result.imdbID)?false:true})]},result.imdbID);})]})]});}else{if(!_this.state.message.length){return/*#__PURE__*/_jsxs(\"div\",{className:\"result-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header-container\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"msg\",children:\"Search Result\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"result-header left\",children:\"Title\"}),/*#__PURE__*/_jsx(\"span\",{className:\"result-header middle\",children:\"Year of Released\"}),/*#__PURE__*/_jsx(\"span\",{className:\"result-header right\",children:\"Action\"})]},\"row-header\")]});}else{return/*#__PURE__*/_jsxs(\"div\",{className:\"result-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header-container\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"msg\",children:\"Search Result\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"result-header left\",children:\"Title\"}),/*#__PURE__*/_jsx(\"span\",{className:\"result-header middle\",children:\"Year of Released\"}),/*#__PURE__*/_jsx(\"span\",{className:\"result-header right\",children:\"Action\"})]},\"row-header\"),/*#__PURE__*/_jsx(\"h1\",{className:\"msg red\",children:_this.state.message})]});}}};_this.toggleSearch=function(imdbID,title,yor){if(_this.state.nominees.has(imdbID)){_this.state.nominees.delete(imdbID);_this.setState({nominees:_this.state.nominees});}else{if(_this.state.nominees.size<5){var data={title:title,yor:yor};_this.state.nominees.set(imdbID,data);_this.setState({nominees:_this.state.nominees});}}};_this.remove=function(imdbID){if(_this.state.nominees.has(imdbID)){_this.state.nominees.delete(imdbID);_this.setState({nominees:_this.state.nominees});}};_this.fetchSearchResult=function(){var query=_this.state.query;_this.setState({lastQuery:query});if(query.length){var searchURL=\"http://www.omdbapi.com/?apikey=7353c7c5&s=\".concat(query);axios.get(searchURL).then(function(res){if(res.data.Search){_this.setState({results:res.data.Search,message:''});}else{_this.setState({results:{},message:'Movie not found.'});}}).catch(function(error){if(error){_this.setState({results:{},message:'Failed to fetch data. Check your network connection.'});}});}else{_this.setState({results:{},message:'Movie name cannot be empty.'});}};_this.inputOnChangeHandler=function(event){var query=event.target.value;_this.setState({query:query,message:''});};_this.state={query:'',lastQuery:'',results:{},message:'',nominees:new Map()};_this.bannerCss={color:'#42474c',backgroundColor:'white',position:'fixed',top:'0',width:'100%',height:'32px'};return _this;}_createClass(Search,[{key:\"render\",value:function render(){var query=this.state.query;return/*#__PURE__*/_jsxs(\"div\",{className:\"page-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header-container\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"span\",{id:\"shoppies1\",children:\"The Shoppies:\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{id:\"shoppies2\",children:\"Movie Awards for Entrepreneurs\"})]}),/*#__PURE__*/_jsx(\"h2\",{className:\"note\",children:\"Nominate Your Top 5 Favorite Movies!\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"search-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"label-container\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"title\",children:\"Search Movie by Title\"}),/*#__PURE__*/_jsxs(\"label\",{className:\"search-label\",htmlFor:\"search-input\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-search icon\"}),/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"query\",value:query,id:\"search-input\",placeholder:\"Movie Title (e.g. Titanic)\",onChange:this.inputOnChangeHandler})}),/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:this.fetchSearchResult,className:\"button\",id:\"search\",children:\"Search\"})})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"search-nominee-results\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"search-result\",children:this.renderSearchResults()}),/*#__PURE__*/_jsx(\"span\",{className:\"nominee-result\",children:this.renderNominees()})]}),this.renderBanner()]});}}]);return Search;}(React.Component);export default Search;","map":{"version":3,"sources":["/Users/karina/Desktop/Shopify-FrontEnd-Challenge/src/components/Search.js"],"names":["React","axios","NominateBut","RemoveBut","Banner","Search","props","renderBanner","nominees","state","size","bannerCss","renderNominees","keys","Array","from","values","map","key","value","title","yor","remove","renderSearchResults","results","lastQuery","message","length","Object","result","Title","Year","toggleSearch","imdbID","has","delete","setState","data","set","fetchSearchResult","query","searchURL","get","then","res","catch","error","inputOnChangeHandler","event","target","Map","color","backgroundColor","position","top","width","height","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './Search.css';\nimport axios from 'axios';\nimport NominateBut from './NominateBut';\nimport RemoveBut from './RemoveBut';\nimport Banner from 'react-js-banner';\n\nclass Search extends React.Component {\n\n    constructor( props ) {\n        super( props );\n\n        this.state = {\n            query: '',\n            lastQuery: '',\n            results: {},\n            message: '',\n            nominees: new Map()\n        }\n\n        this.bannerCss = {\n            color: '#42474c', \n            backgroundColor: 'white', \n            position: 'fixed', \n            top: '0',\n            width: '100%',\n            height: '32px'\n        }\n    }\n\n    renderBanner = () => {\n        const nominees = this.state.nominees;\n        if (nominees.size >= 5) {\n            return (\n                <Banner\n                    title=\"Congratulations! You've selected your top 5 movies! 🎥\"\n                    css={ this.bannerCss }\n                    visibleTime={ 3000 }\n                />\n            )\n        }\n    }\n\n    renderNominees = () => {\n        const nominees = this.state.nominees;\n        const keys = Array.from( nominees.keys() );\n        const values = Array.from( nominees.values() );\n        if ( nominees.size ) {\n            return (\n                <div className=\"nominee-container\">\n                    <div className=\"header-container nominee-header\">\n                        <h1>Nominees</h1>\n                    </div>\n                    <div key=\"row-header\" className=\"row-header\">\n                        <span className=\"result-header left\">Title</span>\n                        <span className=\"result-header middleRight\">Year of Released</span>\n                        <span className=\"result-header right\">Action</span>\n                    </div>\n                    <hr/>\n                    <div className=\"nominee\">\n                        { (keys, values).map( (key, value) => {\n                            return (\n                                <div key={ keys[value] } className=\"result-row\">\n                                    <span className=\"result-title left\">{ key.title }</span>\n                                    <span className=\"result-year middle\">{ key.yor }</span>\n                                    <RemoveBut \n                                                action = { this.remove }\n                                                imdbID = { keys[value] }\n                                                title = { key.title }\n                                                yor = { key.yor }/>\n                                </div>\n                            )\n                        })}\n                    </div>\n                </div>\n            )\n        }\n        else {\n            return (\n                <div className=\"nominee-container\">\n                    <div className=\"header-container nominee-header\">\n                        <h1>Nominees</h1>\n                    </div>\n                    <div key=\"row-header\" className=\"row-header\">\n                                <span className=\"result-header left\">Title</span>\n                                <span className=\"result-header middleRight\">Year of Released</span>\n                                <span className=\"result-header right\">Action</span>\n                    </div>\n                    <div className=\"nominee\">\n                    </div>\n                </div>\n            )\n        }\n    }\n\n    renderSearchResults = () => {\n        const { results } = this.state;\n        const { lastQuery } = this.state;\n        if ( !this.state.message.length && Object.keys( results ) && results.length ) {\n            return (\n                <div className=\"result-container\">\n                    <div className=\"header-container result-header\">\n                        <h1 className=\"msg\">{ results.length } results for \"{ lastQuery }\"</h1>\n                    </div>\n                    <div className=\"result\">\n                        <div key=\"row-header\" className=\"row-header\">\n                            <span className=\"result-header left\">Title</span>\n                            <span className=\"result-header middle\">Year of Released</span>\n                            <span className=\"result-header right\">Action</span>\n                        </div>\n                        <hr/>\n                        { results.map( result => {\n                            return (\n                                <div key={ result.imdbID } className=\"result-row\">\n                                    <span className=\"result-title left\">{ result.Title }</span>\n                                    <span className=\"result-year middle\">{ result.Year }</span>\n                                    <NominateBut\n                                                action = { this.toggleSearch } \n                                                nominees = { this.state.nominees }\n                                                imdbID = { result.imdbID } \n                                                title = { result.Title }\n                                                yor = { result.Year }\n                                                active={ this.state.nominees.has(result.imdbID) ? false : true }/>\n                                </div>\n                            )\n                        })}\n                    </div>\n                </div>\n            )\n        }\n        else {\n            if ( ! this.state.message.length ) {\n                return (\n                    <div className=\"result-container\">\n                        <div className=\"header-container\">\n                            <h1 className=\"msg\">Search Result</h1>\n                        </div>\n                        <div key=\"row-header\" className=\"row-header\">\n                            <span className=\"result-header left\">Title</span>\n                            <span className=\"result-header middle\">Year of Released</span>\n                            <span className=\"result-header right\">Action</span>\n                        </div>\n                    </div>\n                )\n            }\n            else {\n                return (\n                    <div className=\"result-container\">\n                        <div className=\"header-container\">\n                            <h1 className=\"msg\">Search Result</h1>\n                        </div>\n                        <div key=\"row-header\" className=\"row-header\">\n                            <span className=\"result-header left\">Title</span>\n                            <span className=\"result-header middle\">Year of Released</span>\n                            <span className=\"result-header right\">Action</span>\n                        </div>\n                        <h1 className=\"msg red\">{ this.state.message }</h1>\n                    </div>\n                )\n            }\n        }\n    }\n\n    toggleSearch = ( imdbID, title, yor ) => {\n        if ( this.state.nominees.has(imdbID) ) {\n            this.state.nominees.delete(imdbID);\n            this.setState( {\n                nominees: this.state.nominees\n            })\n        }\n        else {\n            if ( this.state.nominees.size < 5 ) {\n                const data = { title: title, yor: yor };\n                this.state.nominees.set(imdbID, data);\n                this.setState( {\n                    nominees: this.state.nominees\n                })\n            }\n        }\n    }\n\n    remove = ( imdbID ) => {\n        if ( this.state.nominees.has(imdbID) ) {\n            this.state.nominees.delete(imdbID);\n            this.setState( {\n                nominees: this.state.nominees\n            })\n        }\n    }\n\n    fetchSearchResult = (  ) => {\n        const query = this.state.query;\n        this.setState( {\n            lastQuery: query\n        });\n        if ( query.length ) {\n            const searchURL = `http://www.omdbapi.com/?apikey=7353c7c5&s=${ query }`;\n            axios.get( searchURL )\n                .then( res => {\n                    if ( res.data.Search ) {\n                        this.setState( {\n                            results: res.data.Search,\n                            message: ''\n                        });\n                    }\n                    else {\n                        this.setState( {\n                            results: {},\n                            message: 'Movie not found.'\n                        });\n                    }\n                })\n                .catch( error => {\n                    if ( error ) {\n                        this.setState( {\n                            results: {},\n                            message: 'Failed to fetch data. Check your network connection.'\n                        });\n                    } \n                })\n        }\n        else {\n            this.setState( {\n                results: {},\n                message: 'Movie name cannot be empty.'\n            });\n        }\n    }\n\n    inputOnChangeHandler = ( event ) => {\n        const query = event.target.value;\n        this.setState({\n            query: query,\n            message: ''\n        });\n    }\n\n    render() {\n        const { query } = this.state;\n        return (\n            <div className=\"page-container\">\n                <div className=\"header-container\">\n                    <h1 className=\"header\"><span id=\"shoppies1\">The Shoppies:</span><br/><br/><span id=\"shoppies2\">Movie Awards for Entrepreneurs</span></h1>\n                    <h2 className=\"note\">Nominate Your Top 5 Favorite Movies!</h2>\n                </div>\n                <div className=\"search-container\">\n                    <div className=\"label-container\">\n                        <p className=\"title\">Search Movie by Title</p>\n                        <label className=\"search-label\" htmlFor=\"search-input\">\n                            <i className=\"fas fa-search icon\"></i>\n                            <span>\n                                <input\n                                type=\"text\"\n                                name=\"query\"\n                                value={query}\n                                id=\"search-input\"\n                                placeholder=\"Movie Title (e.g. Titanic)\"\n                                onChange={ this.inputOnChangeHandler }\n                                />\n                            </span>\n                            <span>\n                                <button onClick={ this.fetchSearchResult } className=\"button\" id=\"search\">Search</button>\n                            </span>\n                        </label>\n                    </div>\n                </div>\n                {/* Result */}\n                <div className=\"search-nominee-results\">\n                    <span className=\"search-result\">\n                    {this.renderSearchResults()}\n                    </span>\n                    {/* Nominees */}\n                    <span className=\"nominee-result\">\n                    {this.renderNominees()}\n                    </span>\n                </div>\n                {/* Banner */}\n                {this.renderBanner()}\n            </div>\n        )\n    }\n}\n\nexport default Search;"]},"metadata":{},"sourceType":"module"}